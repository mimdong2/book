### 목차
- [리눅스 파일의 종류와 특징](#리눅스-파일의-종류와-특징)
- [디렉터리 사용 명령](#디렉터리-사용-명령)
- [파일 다루기](#파일-다루기)


## 리눅스 파일의 종류와 특징
시스템 관련 정보와 장치를 관리하기 위해 파일을 사용한다.  
이 파일을 효과적으로 관리하기 위에 용도에 따라 디렉터리를 계층적으로 구분하여 관리한다.  
디렉터리와 파일로 구성된 전체 집합을 '파일 시스템'이라고 한다.

### 파일의 종류
사용 목적에 따라 일반 파일, 디렉터리, 심벌릭 링크, 장치 파일로 구분할 수 있다.
- 일반 파일 : 데이터를 저장하는데 주로 사용되며, 텍스트 파일과 바이너리 파일이 있다.
- 디렉터리 : 리눅스에서는 디렉터리도 파일로 취급하며 파일 시스템을 계층적으로 구성하기 위한 특수 파일이다.
- 심벌릭 링크 : 다른 파일을 가리키는 특수 파일로 원본 파일의 경로를 파일 내용에 담고 있다.
- 장치 파일 : 리눅스 시스템에 부착된 장치를 관리하기 위한 특수 파일이다. 대부분의 장치 파일은 /dev 디렉터리 아래에 위치한다.

### 디렉터리 계층 구조 예
![디렉터리 계층 구조 예시](https://mblogthumb-phinf.pstatic.net/MjAxOTAyMTNfMTQy/MDAxNTUwMDI5Nzk3NjMw.16JSrXFAJuKFp09_LPOhA8MiD9yH33XOgBKcoiTGT3Ig.FncZ4XNG-pGScfkmB44-zXszaCd-m2bBr-79bMWYNFwg.PNG.jeffms1/image.png?type=w800)

### 디렉터리의 주요 기능
- 홈 디렉터리 : 각 사용자에게 할당된 디렉터리로 처음 사용자 계정을 만들 때 지정된다. 사용자는 자신의 홈 디렉터리 아래에 파일이나 서브 디렉터리를 생성하여 작업할 수 있다. ~(물결표)로 표시한다.

|디렉터리|기능|
|---|----------------------|
|dev|장치 파일이 담겨있다.|
|home|사용자 홈 디렉터리가 생성되는 디렉터리이다.|
|media|외부 장치를 연결(마운트)한다.|
|opt|추가 패키지가 설치된다.|
|root|root 계정의 홈 디렉터리로 루트(/) 디렉터리와 혼동하지 말자.|
|sys|리눅스 커널과 관련된 파일이 있다.|
|usr|기본 실행 파일과 라이브러리 파일, 헤더 파일 등 많은 파일이 있다.|
|bin|실행 파일(명령)을 가지고 있다.|
|boot|부팅에 필요한 커널 파일이 있다.|
|etc|리눅스 설정을 위한 각종 파일이 있다.|
|lost+ffound|파일 시스템에 문제가 발생하여 복구할 경우, 문제가 되는 파일이 지정되는 디렉터리로 보통 비어있다.|
|mnt|파일 시스템을 임시로 마운트하는 디렉터리|
|proc|프로세스 정보 등 커널 관련 정보가 저장된다.|
|run|실행 중인 서비스와 관련된 파일이 저장된다.|
|srv|FTP나 Web 등 시스템에서 제공하는 서비스의 데이터가 저장된다.|
|tmp|시스템 사용 중에 발생하는 임시 데이터가 저장된다. 해당 디렉터리 내 파일은 재시작시 모두 삭제된다.|
|var|시스템 운영 중에 발생하는 데이터나 로그 등이 저장된다.|

### 파일과 디렉터리의 명명 규칙
- 대/소문자를 구별하여 다른 글자로 취급한다.
- .(마침표)로 시작하면 숨김 파일로 간주한다.


## 디렉터리 사용 명령
### pwd
현재 디렉터리의 절대 경로를 출력한다.
### cd [디렉터리명]
현재 디렉터리를 변경한다.
- cd ~ : ~(물결표)는 홈 디렉터리를 의미하므로 홈 디렉터리로 이동한다.
- cd : 목적지 지정하지 않으면 해당 계정의 홈 디렉터리로 이동한다.
### ls [옵션] 파일 또는 디렉터리명
디렉터리의 내용을 출력하는 명령으로 옵션은 다음과 같다.
- -a : 숨김 파일을 포함하여 모든 파일 목록을 출력
- -d : 지정한 디렉터리 자체의 정보를 출력
- -i : 첫번째 행에 inode 번호(파일에 대한 정보)를 출력
- -l : 파일의 상세 정보를 출력
- -A : .(마침표)와 ..(마침표 두개)를 제외한 모든 파일 목록을 출력
- -F : 파일의 종류를 표시 (*:실행파일, /:디렉터리, @:심벌릭 링크, 표시없음:일반파일)
- -L : 심벌릭 링크 파일의 경우 원본 파일의 정보를 출력
- -R : 하위 디렉터리 목록까지 출력
### mkdir [옵션] 디렉터리명
디렉터리를 생성하며 옵션은 다음과 같다.
- -p : 하위 디렉터리를 계층적으로 생성할 때, 중간 단계의 디렉터리가 없으면 중간 단계 디렉터리를 생성하며 전체 디렉터리를 생성한다.
### rmdir [옵션] 디렉터리명
디렉터리를 삭제하며, 옵션은 다음과 같다.
- -p : 지정한 디렉터리를 삭제한 뒤, 그 디렉터리의 부모 디렉터리가 빈 디렉터리면 부모 디렉터리도 삭제한다.


## 파일 다루기
### cat [옵션] 파일명
파일 내용을 연속적으로 출력하므로 내용이 많을 경우 스크롤되므로 전체 내용을 확인하기 어렵다.
- -n : 행 번호를 붙여서 출력
### more [옵션] 파일명
파일 내용을 화면 단위로 출력한다.  
spacebar를 누르면 다음 화면이 출력되고, enter를 누르면 한 줄 씩 스크롤 된다. '/문자열'을 입력하면 해당 문자열을 찾아 이동한다. q키를 눌러 more 명령을 종료할 수 있다.
- +행번호 : 출력을 시작할 행 번호를 지정
### less 파일명
파일 내용을 앞뒤로 스크롤하며 이동할 수 있다. (more 명령은 스크롤되어 지나간 내용은 다시 볼 수 없음)
### tail [옵션] 파일명
파일의 뒷부분 몇 행을 출력한다. 기본 값은 10으로 파일 뒷부분 10행이 출력된다.
- +행번호 : 지정한 행부터 끝까지 출력한다.
- -숫자 : 출력할 행의 수를 지정 한다. (기본 10)
- -f : 파일 출력이 종료되지 않고 파일의 내용이 쌓이면 계속 출력한다.
### cp [옵션] 파일명1/디렉터리명1 파일명2/디렉터리명2
파일이나 디렉터리를 복사한다.
- -i : 파일명2가 존재하면 덮어쓸 것인지 물어본다.
- -r : 디렉터리를 복사할 때 지정
> 두 인자가 모두 파일인 경우, 파일을 다른 파일로 복사
> 두 인자가 모두 디렉터리인 경우(옵션 -r 사용), 디렉터리를 복사
> 첫 번째 인자가 파일, 두 번째 인자가 디렉터리인 경우, 파일을 디렉터리 아래에 복사
### mv [옵션] 파일명1/디렉터리명1 파일명2/디렉터리명2
파일 및 디렉터리를 이동하거나 파일명을 바꿀 때 사용한다.
- -i : 파일명2/디렉터리명2가 존재하면 덮어쓸 것인지 물어본다.
### rm [옵션] 파일명/디렉터리명...
파일 및 디렉터리를 삭제한다.
- -i : 파일/디렉터리를 삭제할지 물어본다.
- -r : 디렉터리를 삭제할 때 지정
### touch 파일명
빈 파일을 생성한다.
### grep [옵션] 패턴 [파일명]
- -i : 대문자와 소문자 모두 검색
- -l : 해당 패턴을 포함하는 파일 이름 출력
- -n : 행 번호를 출력한다.
### find 경로 검색 조건 [동작]
옵션은 다음과 같다.
- -name *filename* : 파일 이름으로 검색한다.
- -type *파일종류* : 파일 종류로 검색한다.
- -usr *loginID* : 지정한 사용자가 소유한 모든 파일을 검색한다.
- -perm *접근권한* : 지정한 사용 권한과 일치하는 파일을 검색한다.
동작은 다음과 같다.
- -exec 명령 {} \; : 검색된 파일에 명령을 실행한다. (명령의 예. rm)
- -ok 명령 {} \; : 사용자의 확인을 받아서 명령을 실행한다.
- -print : 검색된 파일의 절대 경로명을 화면에 출력한다. (기본 동작)
- -ls : 검색 결과를 긴 목록 형식으로 출력한다. 
### whereis 명령, which 명령
경로에서 명령의 위치를 검색한다.


### 파일 링크
기존 파일에 새로운 파일명을 붙이는 것이다. 하드링크와 심벌릭링크가 있다.
- 하드 링크 : 기존 파일에 여러 개의 이름을 붙일 수 있는데 이 때 붙이는 파일명이 하드 링크다.
- 심벌릭 링크 : 원본 파일을 가리키는 새로운 파일을 만든다. (윈도우의 바로가기 기능과 개념이 동일)
#### 하드 링크 만들기
> ln 원본파일명 링크파일명
```
// 하드 링크 생성 전 확인
mimdong@MacBookPro temp % ls -l
total 88
-rw-r--r--  1 mimdong  staff  41133  1  2 21:03 redis.conf
// 하드 링크 생성
mimdong@MacBookPro temp % ln redis.conf redis.conf.ln
// 하드 링크 생성 후 확인
// 접근권한 다음 숫자가 1에서 2로 변경. 이 값은 하드 링크 수
mimdong@MacBookPro temp % ls -l
total 176
-rw-r--r--  2 mimdong  staff  41133  1  2 21:03 redis.conf
-rw-r--r--  2 mimdong  staff  41133  1  2 21:03 redis.conf.ln
// 두 파일의 inode 값은 같다 -> 같은 파일이다.
mimdong@MacBookPro temp % ls -i
15116981 redis.conf	15116981 redis.conf.ln
```
[참고] 리눅스 파일은 '파일명+inode+데이터블록'으로 구성
- 파일명 : 사용자가 접근할 때 사용하는 파일 이름
- inode : 파일에 관한 정보를 가지고 있는 특별한 구조체로 외부적으로는 번호로 표시되고 내부적으로는 파일의 종류 및 크기, 소유자, 파일 변경 시간, 파일명 등 파일 상세 정보와 데이터 블록의 주소가 저장 됨, 즉 inode 값이 같다는 것은 같은 파일이다.
#### 심벌릭 링크 만들기
> ln -s 원본파일명 링크파일명
```
// 심벌릭 링크 생성 전 확인
mimdong@MacBookPro temp % ls -l
total 176
-rw-r--r--  2 mimdong  staff  41133  1  2 21:03 redis.conf
-rw-r--r--  2 mimdong  staff  41133  1  2 21:03 redis.conf.ln
// 심벌릭 링크 생성
mimdong@MacBookPro temp % ln -s redis.conf.ln redis.conf.s
// 심벌릭 링크 생성 후 확인
// 심벌릭 링크는 파일의 종류가 l(소문자 L)로 표시된다.
// 심벌릭 링크는 하드 링크의 수가 1이다. 
// 심벌릭 링크는 뒤에 원본 파일 이름이 표시된다.
mimdong@MacBookPro temp % % ls -l
total 176
-rw-r--r--  2 mimdong  staff  41133  1  2 21:03 redis.conf
-rw-r--r--  2 mimdong  staff  41133  1  2 21:03 redis.conf.ln
lrwxr-xr-x  1 mimdong  staff     13  1  2 21:11 redis.conf.s -> redis.conf.ln
// 심벌릭 링크는 원본 파일과 inode 번호가 다르다. 즉 별개의 파일이다.
mimdong@MacBookPro temp % ls -i
15116981 redis.conf	15116981 redis.conf.ln	15117489 redis.conf.s
```


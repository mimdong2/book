### 목차
- [프로레스의 개념](#프로세스의-개념)
- [프로세스 관리 명령](#프로세스-관리-명령)
- [포그라운드, 백그라운드 프로세스와 작업 제어](#포그라운드-백그라운드-프로세스와-작업-제어)
- [작업 예약](#작업-예약)

## 프로세스의 개념
- 프로세스는 현재 시스템에서 실행 중인 프로그램이고 리눅스는 기본적으로 다중 프로세스 시스템으로 여러 프로세스가 동시에 실행된다.
- 운영에 필요한 시스템 프로세스, 사용자가 실행한 사용자 프로세스도 있다.
- 모든 프로세스는 부모-자식 관계로 이루어져 있다.
- 각 프로세스는 고유한 번호를 가지고 있고 PID라고 부른다.
    - PID : Process Identification Number
    - PID는 1번부터 시작하고 프로세스가 실행되면서 하나씩 증가하여 부여된다.
    - 리눅스 시스템을 부팅할 때, PID 1번 init 프로세스와 2번 kthreadd 프로세스가 차례로 실행된다.
### 프로세스의 종류
- 데몬 프로세스  
특정 서비스를 제공하기 위해 리눅스 커널에 의해 실행된다.  
평소에는 대기 상태로 있다가 서비스 요청이 들어오면 해당 서비스를 제공한다.
예시로 원격 접속을 제공하기 위한 sshd 프로세스는 ssh 서버 데몬이다.
- 고아 프로세스  
자식 프로세스가 종료되면 부모 프로세스로 돌아간다. 그러나 자식 프로세스가 아직 실행 중인데 부모 프로세스가 먼저 종료되면 자식 프로세스는 고아 프로세스가 된다.  
이련 경우, 1번 프로세스가 이런 고아 프로세스의 새로운 부모 프로세스가 되어 고아 프로세스사 작업을 마치고 종료될 수 있도록 해준다.
- 좀비 프로세스  
자식 프로세스가 종료될 때 부모 프로세스에 종료 정보(exit status)를 보내고 부모 프로세스가 이 정보를 받으면 자식 프로세스는 프로세스 테이블 목록에서 삭제된다. 그런데 자식 프로세스가 종료가 되었는데도 프로세스 테이블 목록에 남아 있는 경우가 있고 이를 좀비 프로세스라고 한다.  
즉 부모 프로세스가 자식 프로세스의 종료 정보를 제대로 처리하지 않았기 때문이다.  
좀비 프로세스는 실제로 실행되고 있지는 않지만 동작 중인 프로세스 테이블 목록을 차지하고 있다. 따라서 좀비 프로세스의 증가로 프로세스 테이블 용량이 부족한 경우, 정상적인 프로세스가 실행되지 않을 수도 있다. 좀비 프로세스는 kill 명령으로 제거할 수 없으며 SIGCHILD 시그널을 부모 프로세스에 보내 정리하도록 해야 한다.

## 프로세스 관리 명령
### 프로세스 목록 보기
> 프로세스 목록을 보는 명령어는 `ps -ef` 이다.
```
ubuntu@server:~$ ps -ef
UID        PID  PPID  C STIME TTY          TIME CMD
root         1     0  0  2022 ?        00:05:00 /lib/systemd/systemd --system --
root         2     0  0  2022 ?        00:00:00 [kthreadd]
root         4     2  0  2022 ?        00:00:00 [kworker/0:0H]
root         6     2  0  2022 ?        00:00:00 [mm_percpu_wq]
root         7     2  0  2022 ?        00:02:00 [ksoftirqd/0]
root         8     2  0  2022 ?        00:04:48 [rcu_sched]
root         9     2  0  2022 ?        00:00:00 [rcu_bh]
```
- UID : 프로세스를 실행한 사용자 ID
- PID : 프로세스 번호
- PPID : 부모 프로세스의 번호
- C : CPU 사용량(%)
- STIME : 프로세스의 시작 날짜나 시간
- TTY : 프로세스가 실행된 터미널의 종류와 번호 (값이 ?인 것은 대부분 데몬으로 실행한 프로세스)
- TIME : 프로세스 실행 시간
- CMD : 실행되고 있는 프로그램의 이름(명령)

> ps au  
>> a : 터미널에서 실행한 프로세스의 정보를 출력  
>> u : 프로세스 소유자 이름, CPU 사용량, 메모리 사용량 등 상세정보 출력
```
ubuntu@d1-dev-bastion:~$ ps au
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root       834  0.0  0.0  14672   364 ttyS0    Ss+   2022   0:00 /sbin/agetty -o -p -- \u --keep-baud 115200,38400,9600 ttyS0 vt220
root       835  0.0  0.0  14896   132 tty1     Ss+   2022   0:00 /sbin/agetty -o -p -- \u --noclear tty1 linux
dbaas    20780  0.0  0.5  21472  5176 pts/4    Ss   19:22   0:00 -bash
dbaas    20868  0.0  0.5  21472  5080 pts/8    Ss   19:24   0:00 -bash
dbaas    20987  0.0  0.2  12980  2024 pts/4    S+   20:24   0:00 sshpass -p zzzzzzzzz ssh -p 30022 root@127.0.0.1
dbaas    20988  0.0  0.6  51216  6128 pts/2    Ss+  20:24   0:00 ssh -p 30022 root@127.0.0.1
```
- USER : 사용자 계정 이름
- %CPU : CPU 사용량(%)
- %MEM : 물리적 메모리 사용량(%)
- VSZ : 사용하고 있는 가상 메모리의 크기(KB)
- RSS : 사용하고 있는 물리 메모리의 크기(KB)
- START : 프로세스 시작 시간

### 프로세스 종료하기
> kill [시그널] PID : 인자로 지정한 프로세스에 시그널을 전달한다.  
>> 시그널 -2 : 인터럽트 시그널을 보낸다(ctrl+c)  
>> 시그널 -9 : 프로세스를 강제로 종료한다.  
>> 시그널 -15 : 프로세스가 관련된 파일을 정리하고 프로세스를 종료한다. 

### 프로세스 관리 도구
> top : 현재 실행 중인 프로세스에 대한 정보를 주기적으로 출력한다.
```
ubuntu@d1-dev-bastion:~$ top
top - 21:06:01 up 243 days, 39 min,  3 users,  load average: 0.08, 0.02, 0.01
Tasks: 259 total,   1 running, 216 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.7 us,  0.3 sy,  0.0 ni, 99.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem :  1008648 total,    89452 free,   440984 used,   478212 buff/cache
KiB Swap:  2097148 total,  1968892 free,   128256 used.   397500 avail Mem

  PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND
21155 ubuntu    20   0   42936   4220   3468 R  0.3  0.4   0:00.07 top
31892 ubuntu    20   0 2462740 239200  13448 S  0.3 23.7  58:32.57 java
    1 root      20   0  225776   5920   3828 S  0.0  0.6   5:00.12 systemd
    2 root      20   0       0      0      0 S  0.0  0.0   0:00.83 kthreadd
    4 root       0 -20       0      0      0 I  0.0  0.0   0:00.00 kworker/0:0H
    6 root       0 -20       0      0      0 I  0.0  0.0   0:00.00 mm_percpu_wq
```
- PR : 우선순위 (운영체제에서 참고하는 우선순위)
- NI : Nice 값 (사용자가 조작 가능한 우선순위, -20~19 범위로, 값이 낮을 수록 우선 순위가 높다.)
- VIRT : 프로세스가 사용하는 가상 메모리 크기
- RES : 프로세스가 사용하는 메모리 크기
- SHR : 프로세스가 사용하는 공유 메모리 크기
- TIME+ : CPU 누적 이용 시간

## 포그라운드, 백그라운드 프로세스와 작업 제어

## 작업 예약